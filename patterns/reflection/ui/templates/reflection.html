{% extends "layout_pattern.html" %}

{% block title %}Reflection Demo{% endblock %}
{% block head %}
{% endblock %}
{% block pattern_name %}Reflection Pattern{% endblock %}
{% block pattern_desc %}
    An agent that critiques and refines its own work. 
    Try asking for a poem or a short story.
{% endblock %}
{% block form_action %}/demo/reflection{% endblock %}
{% block placeholder %}e.g. Write a haiku about rust{% endblock %}

{% block results %}
    {% if result %}
    <div class="results-grid">
        {% for step in result.history %}
            {% set css_class = "result-card" %}
            {% if step.role == "Critic" %}
                {% set css_class = "result-card critique" %}
            {% elif step.role == "Refiner" %}
                {% set css_class = "result-card final" %}
            {% endif %}
            <div class="{{ css_class }}">
                <h3>{{ step.role }}</h3>
                <div class="content">{{ step.content }}</div>
            </div>
        {% endfor %}
        <div class="result-card final">
            <h3>Final Result</h3>
            <div class="content">{{ result.final }}</div>
        </div>
    </div>
    {% endif %}
{% endblock %}
